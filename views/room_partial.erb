<style type="text/css">
/* グリッドを分かり易くするためのカラム背景色等レイアウト */
.demo-content {
	padding: 15px;
	font-size: 18px;
	min-height: 200px;
	main-width: 200px;
	background: #dbdfe5;
	margin-bottom: 10px;
}
			.demo-content.bg-alt {
				background: #abb1b8;
			}
			li {
				list-style-type: none;
			}
			ul {
				list-style-type: none;
			}

</style>

<script type="text/javascript">
var current_height = 0;
$(document).on('scroll', function(){
	var trigger_pos = 0; 
	var pos = $(window).scrollTop();
	if((pos + $(window).height()) >= ($(document).height() * trigger_pos)
			&& pos > current_height){
		$('#read_mores').trigger("click");
		console.log("HelloWorld")
	}
	current_height = pos;
})
</script>

<!-- メニューボタン -->
<div class="dropdown">
	<button aria-expanded="true" aria-haspopup="true" class="btn btn-default btn-lg" data-toggle="dropdown" id="dropdownMenu1" type="button">
		<span class="glyphicon glyphicon-align-justify"></span>
	</button>
	<ul aria-labelledby="dropdownMenu1" class="dropdown-menu">
		<li>
			<a href="/room">TopRoom</a>
		</li>
		<li>
			<a href="/create_room">RoomCreate</a>
		</li>
		<li>
			<a href="/my_room_list">RoomLists</a>
		</li>
	</ul>
</div>
<!-- メニューボタン終了 -->


<!-- Bootstrapグリッド・システム -->
<div class="container">
	<div class="row">
		<% @list_all.order("created_at DESC").each do |room| %>
			<div class="col-md-3">
				<div class="demo-content bg-alt">
				<!-- <img src="#" class="img-rounded"> -->
				<ul> 
					<li>
						<a href="join_room/<%= room.id %>" title="RoomID=><%= room.id %>"><%= room.name %></a>
						<% unless Friendroom.where(room_id: room.id , user_id: session[:user]).exists? %>
							☆
						<% else %>
							★
						<% end %>
					</li> 
					<% room.users.last(8).each do |user| %>
						<table>
							<tr>
								<td>
									<%= user.name %>
								</td>
							</tr>
						</table>
					<% end %>
				</ul>
				</div>
			</div>
		<% end %>
	</div>
</div>
<!-- Bootstrapグリッド・システム end -->

<%= link_to_next_page @list_all, 'もっと見る', id: 'read_mores', remote: true %>

